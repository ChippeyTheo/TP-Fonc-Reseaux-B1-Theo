# TP-1 : Premier pas rÃ©seau

## I. Exploration locale en solo

### 1. Affichage d'informations sur la pile TCP/IP locale

**ðŸŒž Affichez les infos des cartes rÃ©seau de votre PC**

```
theo@MacBook-Pro-de-chippey ~ % ifconfig

en0: flags=8863<UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST> mtu 1500
	options=400<CHANNEL_IO>
	ether 88:e9:fe:75:94:10     XXX
	inet6 fe80::4e:6f62:f43f:d284%en0 prefixlen 64 secured scopeid 0x4 
	inet 10.33.48.133   XXX netmask 0xfffffc00 broadcast 10.33.51.255
	nd6 options=201<PERFORMNUD,DAD>
	media: autoselect
	status: active
```

**ðŸŒž Affichez votre gateway**

```
theo@MacBook-Pro-de-chippey ~ % route -n get default

   route to: default
destination: default
       mask: default
    gateway: 10.33.51.254       XXX
  interface: en0
      flags: <UP,GATEWAY,DONE,STATIC,PRCLONING,GLOBAL>
 recvpipe  sendpipe  ssthresh  rtt,msec    rttvar  hopcount      mtu     expire
       0         0         0         0         0         0      1500         0 
```

**ðŸŒž DÃ©terminer la MAC de la passerelle**

```
theo@MacBook-Pro-de-chippey ~ % ifconfig en1 | awk '/ether/{print $2}'

82:6d:86:62:50:01       XXX
```

### 2. Modifications des informations

#### A. Modification d'adresse IP (part 1)

**ðŸŒž Utilisez l'interface graphique de votre OS pour changer d'adresse IP :**

```
theo@MacBook-Pro-de-chippey ~ % ifconfig

en0: flags=8863<UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST> mtu 1500
	options=400<CHANNEL_IO>
	ether 88:e9:fe:75:94:10 
	inet6 fe80::4e:6f62:f43f:d284%en0 prefixlen 64 secured scopeid 0x4 
	inet 10.33.48.100   XXX netmask 0xfffffc00 broadcast 10.33.51.255
	nd6 options=201<PERFORMNUD,DAD>
	media: autoselect
	status: active
```

## II. Exploration locale en duo


## III. Manipulations d'autres outils/protocoles cÃ´tÃ© client

### 1. DHCP

**ðŸŒžExploration du DHCP, depuis votre PC**

* Adresse IP du serveur DHCP du rÃ©seau WiFi YNOV

```
theo@MacBook-Pro-de-chippey ~ % ipconfig getpacket en0
op = BOOTREPLY
htype = 1
flags = 0
hlen = 6
hops = 0
xid = 0xd2a82548
secs = 2
ciaddr = 0.0.0.0
yiaddr = 10.33.48.133
siaddr = 0.0.0.0
giaddr = 0.0.0.0
chaddr = 88:e9:fe:75:94:10
sname = 
file = 
options:
Options count is 7
dhcp_message_type (uint8): ACK 0x5
server_identifier (ip): 10.33.51.254        XXX
lease_time (uint32): 0x15180
subnet_mask (ip): 255.255.252.0
router (ip_mult): {10.33.51.254}
domain_name_server (ip_mult): {10.33.10.2, 8.8.8.8}
end (none):
```

* Date d'expiration de votre bail DHCP(fait avec ma 4g refaire avec wifi ynov)

```
theo@MacBook-Pro-de-chippey ~ % sudo su             
sh-3.2# cat /var/db/dhcpclient/leases/*

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>ClientIdentifier</key>
	<data>
	AYjp/nWUEA==
	</data>
	<key>IPAddress</key>
	<string>10.33.48.133</string>
	<key>LeaseLength</key>
	<integer>86217</integer>	XXX
	<key>LeaseStartDate</key>
	<date>2023-10-16T11:47:18Z</date>	XXX
	<key>PacketData</key>
	<data>
	AgEGANKoJZIAAgAAAAAAAAohMIUAAAAAAAAAAIjp/nWUEAAAAAAAAAAAAAAAAAAAAAAA
	AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
	AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
	AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
	AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABjglNjNQEFNgQKITP+MwQAAVDJ
	AQT///wAAwQKITP+BggKIQoCCAgICP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAA
	</data>
	<key>RouterHardwareAddress</key>
	<data>
	fFocy/2k
	</data>
	<key>RouterIPAddress</key>
	<string>10.33.51.254</string>
	<key>SSID</key>
	<string>WiFi@YNOV</string>
</dict>
</plist>
```

### 2. DNS

**ðŸŒž Trouver l'adresse IP du serveur DNS que connaÃ®t votre ordinateur**

```
theo@MacBook-Pro-de-chippey ~ % cat /etc/resolv.conf 
#
# macOS Notice
#
# This file is not consulted for DNS hostname resolution, address
# resolution, or the DNS query routing mechanism used by most
# processes on this system.
#
# To view the DNS configuration used by this system, use:
#   scutil --dns
#
# SEE ALSO
#   dns-sd(1), scutil(8)
#
# This file is automatically generated.
#
nameserver 10.33.10.2
nameserver 8.8.8.8
```

**ðŸŒž Utiliser, en ligne de commande l'outil nslookup (Windows, MacOS) ou dig (GNU/Linux, MacOS) pour faire des requÃªtes DNS Ã  la main**

* pour google.com

```
theo@MacBook-Pro-de-chippey ~ % nslookup google.com 8.8.8.8
Server:		8.8.8.8
Address:	8.8.8.8#53

Non-authoritative answer:
Name:	google.com
Address: 142.250.179.110
```

* pour ynov.com

```
theo@MacBook-Pro-de-chippey ~ % nslookup ynov.com 8.8.8.8                 
Server:		8.8.8.8
Address:	8.8.8.8#53

Non-authoritative answer:
Name:	ynov.com
Address: 104.26.11.233
Name:	ynov.com
Address: 172.67.74.226
Name:	ynov.com
Address: 104.26.10.233
```
* dÃ©terminer l'adresse IP du serveur Ã  qui vous venez d'effectuer ces requÃªtes

On effectue les requetes sur le serveur 8.8.8.8

* pour l'adresse 231.34.113.12

```
theo@MacBook-Pro-de-chippey ~ % nslookup 231.34.113.12 8.8.8.8
Server:		8.8.8.8
Address:	8.8.8.8#53

** server can't find 12.113.34.231.in-addr.arpa: NXDOMAIN
```

* pour l'adresse 78.34.2.17

```
theo@MacBook-Pro-de-chippey ~ % nslookup 78.34.2.17 8.8.8.8   
Server:		8.8.8.8
Address:	8.8.8.8#53

Non-authoritative answer:
17.2.34.78.in-addr.arpa	name = cable-78-34-2-17.nc.de.

Authoritative answers can be found from:

```

* interprÃ©ter les rÃ©sultats

La premiÃ¨re adresse n'existe pas.
La seconde n'est pas autoritaire sur l'adresse 8.8.8.8, elle a donc demandÃ© la rÃ©ponse a quelqu'un d'autre (cascade demande jusqu'a trouver quelqu'un avec la rÃ©ponse et redescends)
